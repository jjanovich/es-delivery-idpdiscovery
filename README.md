# idpdiscovery

This sample discovers and redirect users for the proper IDP login.
The idp can be discovered using 3 strategies:

- USERID
- COMPANY
- NETWORK

### strategy: "USERID"

DISCOVER THE IDP BY USERNAME
1 - IDP DISCOVERY PRESENTS A PAGE WITH AN INPUT FOR THE USERNAME (userid.html)
2 - USER SUBMITS HIS USERNAME
3 - DISCOVERY CODE MATCHES THE USERID WITH THE useridPattern FOR EACH IDP (UNDER IDPS LIST) TO FIND A MATCH

### strategy: "COMPANY"

DISCOVER THE IDP BY THE USER COMPANY

1 - IDP DISCOVERY PRESENTS A PAGE WITH COMPANIES AVAILABLE FOR LOGIN (company.html)
2 - USER SELECTS HIS COMPANY
3 - DISCOVERY CODE MATCHES THE COMPANY WITH THE PROPER IDP (UNDER IDPS LIST) TO FIND A MATCH

### strategy: "NETWORK"

DISCOVER THE IDP BY THE USER IP (CIDR)

1 - IDP DISCOVERY CAPTURES THE USER IP ADDRESS
2 - DISCOVERY CODE MATCHES THE USER IP WITH THE NETWORK ROUTING (CIDR) FOR THE PROPER IDP (UNDER IDPS LIST) TO FIND A MATCH

> PS: TO KNOW MORE ABOUT WHAT ARE CIDRs, CHECK:
> https://www.digitalocean.com/community/tutorials/understanding-ip-addresses-subnets-and-cidr-notation-for-networking
> http://www.subnet-calculator.com/cidr.php [IPv4]
> https://www.ultratools.com/tools/ipv6CIDRToRangeResult [IPv6]

## What happens after the IDP is discovered?

AFTER THE IDP IS DISCOVERED, THE CODE REDIRECTS THE USER TO DIFFERENT PAGES DEPENDING ON HIS IDP TYPE:

IDP TYPES SUPPORTED:

- OKTA: DISCOVERY CODE PREPARES A CUSTOM LOGIN PAGE (login.html) USING THE SIGN-IN WIDGET LOGIC
- ADFS: DISCOVERY CODE REDIRECTS USER FOR AN IDP INITIATED LOGIN IN AD FS
- SAML: DISCOVERY CODE REDIRECTS USER FOR AN IDP INITIATED LOGIN IN IN THE SAML PROVIDER (E.G. ORACLE ACCESS MANAGER, IBM TIVOLI AM, OR NOVELL AM).
